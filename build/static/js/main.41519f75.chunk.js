(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{127:function(e,t,i){},196:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return s}));var n=i(62),a=i.n(n);const s=t=>{const i=a.a.randomBytes(16),n=a.a.createHash("sha256").update("123rudhram8802").digest("base64").substr(0,32),s=a.a.createCipheriv("aes-256-cbc",e.from(n),i);let l=s.update(t,"utf-8","hex");return l+=s.final("hex"),{encryptedText:l,iv:i.toString("hex")}}}).call(this,i(23).Buffer)},228:function(e,t){},230:function(e,t){},242:function(e,t){},244:function(e,t){},269:function(e,t){},271:function(e,t){},272:function(e,t){},277:function(e,t){},279:function(e,t){},298:function(e,t){},310:function(e,t){},313:function(e,t){},317:function(e,t,i){},318:function(e,t,i){},319:function(e,t,i){"use strict";i.r(t);var n=i(1),a=i.n(n),s=i(30),l=i.n(s),o=i(9),c=i(365),r=i(197),d=i(33),j=i.n(d),u=i(363);const p=e=>{var t,i=localStorage.getItem("loginInfo");i=JSON.parse(i);const n={headers:{Authorization:"Bearer ".concat(null===(t=i)||void 0===t?void 0:t.token)}};return u.a.get("http://localhost:4000/api/".concat(e),n)},h=(e,t)=>{var i,n=localStorage.getItem("loginInfo");n=JSON.parse(n);const a={headers:{Authorization:"Bearer ".concat(null===(i=n)||void 0===i?void 0:i.token)}};return u.a.post("http://localhost:4000/api/".concat(e),t,a)},x=e=>h("chats",e),v=()=>p("chats"),b=e=>p("messages/".concat(e));var g=i(19),O=i(55);const f=Object(O.b)({name:"chatStore",initialState:{isCreateGroup:!1,allChats:[],allMessages:[],NoChats:!1},reducers:{setNoChats:(e,t)=>{e.NoChats=t.payload},setIsCreateGroup:(e,t)=>{e.isCreateGroup=t.payload},setChatData:(e,t)=>{e.allChats=t.payload},addMessage:(e,t)=>{e.allMessages=[...e.allMessages,t.payload]},addNewMessage:(e,t)=>{let{_id:i,message:n}=t.payload;const a=e.allMessages.findIndex((e=>e._id===i));a>=0?e.allMessages[a].messages.push(n):e.allMessages.push({_id:i,messages:[n]})},updateLatestMessage:(e,t)=>{const{_id:i,message:n}=t.payload,a=e.allChats.findIndex((e=>e._id===i));e.allChats[a].latestMessage=n}}}),{setIsCreateGroup:m,setChatData:y,addMessage:w,addNewMessage:C,setNoChats:S,updateLatestMessage:I}=f.actions;var k=f.reducer;const N=Object(O.b)({name:"userStore",initialState:{isLogin:!1,data:null,currentChatUser:{}},reducers:{setIsLogin:(e,t)=>{e.isLogin=t.payload},setData:(e,t)=>{e.data=t.payload},setCurrentChatUser:(e,t)=>{e.currentChatUser=t.payload}}}),{setIsLogin:_,setData:M,setCurrentChatUser:T}=N.actions;var D=N.reducer,E=i(368),W=i(328),F=i(362),L=i(58),P=i(96),U=i(2);var A=function(e){var t,i;let{item:n,i:a,currentUser:s}=e,l=s===(null===n||void 0===n||null===(t=n.sender)||void 0===t?void 0:t._id)?"flex-end":"flex-start",o=s===(null===n||void 0===n||null===(i=n.sender)||void 0===i?void 0:i._id)?"end":"start";const c=Object(P.a)(null===n||void 0===n?void 0:n.content,null===n||void 0===n?void 0:n.iv);return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)("div",{style:{display:"flex",justifyContent:"".concat(l)},children:Object(U.jsx)("div",{className:o,style:{padding:"8px",margin:"4px",maxWidth:"50%"},children:Object(U.jsx)("p",{children:c})})})})},J=(i(127),i(193)),G=i.p+"static/media/typingImg.73518c22.gif",R=i(83),B=i(194),z=i(370),q=i(372),H=i(373),V=i(360),K=i(355);const Y=a.a.forwardRef((function(e,t){return Object(U.jsx)(K.a,{direction:"up",ref:t,...e})}));var Q=function(e){let{open:t,setOpen:i,current:n}=e;return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(z.a,{open:t,TransitionComponent:Y,keepMounted:!0,onClose:()=>i(!1),"aria-describedby":"alert-dialog-slide-description",children:Object(U.jsxs)("div",{style:{backgroundColor:"black",color:"white"},children:[Object(U.jsx)(V.a,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:"Profile"}),Object(U.jsxs)(q.a,{children:[Object(U.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"GrayText",marginBottom:"4px"},children:[Object(U.jsx)(E.a,{src:null===n||void 0===n?void 0:n.profilePic,alt:"user"}),Object(U.jsx)(W.a,{variant:"h6",children:null===n||void 0===n?void 0:n.name})]}),Object(U.jsxs)(H.a,{id:"alert-dialog-slide-description",style:{color:"GrayText"},children:["Email  : ",null===n||void 0===n?void 0:n.email]})]})]})})})};var X=function(e){var t;const{id:i}=Object(o.q)(),[a,s]=Object(n.useState)(!1),l=Object(g.c)((e=>e.userStore.currentChatUser)),r=Object(n.useRef)(null);Object(n.useEffect)((()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)}),[e.allMessages]);const[d,j]=Object(n.useState)(!1);var u=localStorage.getItem("loginInfo");u=JSON.parse(u);const p=Object(o.o)(),[h,x]=Object(n.useState)({t:"16px",s:"12px"});return Object(U.jsxs)("div",{style:{backgroundColor:"white"},className:"chatArea",children:[Object(U.jsxs)("div",{style:{display:"flex",gap:"12px",alignItems:"center",color:"grayText",padding:"4px"},className:"chatAreaOne",children:[Object(U.jsx)(c.a,{mdUp:!0,children:Object(U.jsx)("div",{children:Object(U.jsx)(J.a,{onClick:()=>p("/"),style:{cursor:"pointer"}})})}),Object(U.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"50%"},children:[Object(U.jsx)(E.a,{src:null===l||void 0===l?void 0:l.profilePic,alt:"name"}),Object(U.jsx)(W.a,{variant:"body1",children:null===l||void 0===l?void 0:l.name})]}),Object(U.jsx)("div",{style:{flexGrow:"1"}}),Object(U.jsx)("button",{onClick:()=>(()=>{const e=window.location.href;navigator.clipboard.writeText(e).then((()=>{j(!0),setTimeout((()=>j(!1)),1500)})).catch((e=>console.error("Unable to copy to clipboard",e)))})(),children:Object(U.jsx)("div",{style:{backgroundColor:"white",padding:"8px",boxShadow:"0px px 2px 0px gray",border:"1px solid gray",borderRadius:"50%"},children:Object(U.jsx)(R.a,{})})}),Object(U.jsx)("button",{onClick:()=>s(!a),children:Object(U.jsxs)("div",{style:{backgroundColor:"white",padding:"8px",boxShadow:"0px px 2px 0px gray",border:"1px solid gray",borderRadius:"50%"},children:[Object(U.jsx)(B.a,{}),Object(U.jsx)(Q,{open:a,setOpen:s,current:l})]})}),d&&Object(U.jsxs)("div",{className:"popup",children:[" ",Object(U.jsx)(R.a,{})," Copied to clipboard!"]})]}),Object(U.jsx)("hr",{}),Object(U.jsxs)("div",{style:{overflowY:"scroll"},className:"chatAreaTwo",ref:r,children:[null===e||void 0===e||null===(t=e.allMessages)||void 0===t?void 0:t.map(((e,t)=>{var i;return Object(U.jsx)(A,{item:e,currentUser:null===(i=u)||void 0===i?void 0:i.id},t)})),(null===e||void 0===e?void 0:e.userIsTyping)&&i===(null===e||void 0===e?void 0:e.receiveUserTyping)&&Object(U.jsx)("div",{style:{display:"flex",justifyContent:"flex-start"},children:Object(U.jsx)("img",{src:G,alt:"",style:{height:"40px"}})})]}),Object(U.jsxs)("div",{style:{position:"relative",display:"flex",gap:"8px",alignItems:"center",padding:"8px"},className:"chatAreaThree",children:[Object(U.jsx)(F.a,{id:"chatValue",label:"",value:null===e||void 0===e?void 0:e.message,onChange:t=>{null===e||void 0===e||e.isTyping(),null===e||void 0===e||e.setMessage(t.target.value),t.target.value.length>0?x({t:"8px",s:"10px"}):x({t:"16px",s:"12px"})},fullWidth:!0,variant:"outlined",onClick:()=>{x({t:"8px",s:"10px"})},onKeyPress:t=>{"Enter"===t.key&&(null===e||void 0===e||e.sendMessage())},InputProps:{style:{fontSize:"12px"}}}),Object(U.jsx)("label",{htmlFor:"chatValue",style:{position:"absolute",top:null===h||void 0===h?void 0:h.t,left:"10px",fontSize:null===h||void 0===h?void 0:h.s,background:"white",padding:"0 4px"},children:null===e||void 0===e?void 0:e.label}),Object(U.jsx)(L.c,{style:{fontSize:"20px",cursor:"pointer"},onClick:()=>null===e||void 0===e?void 0:e.sendMessage()})]})]})};const Z=Object(O.b)({name:"UiStore",initialState:{open:!1,loading:!1},reducers:{setOpen(e,t){e.open=t.payload},setLoading(e,t){e.loading=t.payload}}}),{setOpen:$,setLoading:ee}=Z.actions;var te=Z.reducer,ie=i.p+"static/media/logo.ccc8ea01.png";var ne=function(e){var t;let{handleOpen:i}=e;const n=Object(g.b)();var a=localStorage.getItem("loginInfo");return a=JSON.parse(a),Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:"8px",height:"20%"},children:[Object(U.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(U.jsx)("img",{src:ie,alt:"logo",style:{width:"100px"}}),Object(U.jsx)(E.a,{style:{cursor:"pointer",border:"2px solid white"},src:null===(t=a)||void 0===t?void 0:t.profilePic,alt:"user",onClick:i})]}),Object(U.jsxs)("button",{onClick:()=>{n($(!0))},style:{display:"flex",gap:"8px",backgroundColor:"white",alignItems:"center",height:"50px"},children:[Object(U.jsx)(L.b,{style:{marginLeft:"8px"}}),Object(U.jsx)("p",{style:{},children:"Search..."})]})]})})};var ae=function(e){var t,i;let{props:n}=e;const a=Object(o.o)(),s=Object(g.b)();var l=localStorage.getItem("loginInfo");l=JSON.parse(l);const c=null===n||void 0===n||null===(t=n.users)||void 0===t?void 0:t.find((e=>{var t;return(null===e||void 0===e?void 0:e._id)!==(null===(t=l)||void 0===t?void 0:t.id)}));let r="";var d,j;return null!==n&&void 0!==n&&null!==(i=n.latestMessage)&&void 0!==i&&i.content&&(r=Object(P.a)(null===n||void 0===n||null===(d=n.latestMessage)||void 0===d?void 0:d.content,null===n||void 0===n||null===(j=n.latestMessage)||void 0===j?void 0:j.iv)),Object(U.jsx)("button",{style:{width:"100%"},onClick:()=>{a("/chat/".concat(null===n||void 0===n?void 0:n._id)),s($(!1))},children:Object(U.jsxs)("div",{style:{display:"flex",padding:"10px",alignItems:"center",gap:"8px",margin:"2px"},className:"chatUserCard",children:[Object(U.jsx)(E.a,{src:null===c||void 0===c?void 0:c.profilePic,alt:"img"}),Object(U.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",alignItems:"flex-start"},children:[Object(U.jsx)(W.a,{variant:"body1",style:{color:"black",fontSize:"16px",fontWeight:"600",textOverflow:"ellipsis",maxWidth:"85%",whiteSpace:"nowrap",overflow:"hidden"},children:null===c||void 0===c?void 0:c.name}),Object(U.jsx)(W.a,{variant:"body2",style:{color:"#3498db",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"50%"},children:r})]})]})},"".concat(null===n||void 0===n?void 0:n._id))},se=i(374),le=i(369);var oe=function(){return Object(U.jsxs)(se.a,{style:{padding:"8px",display:"flex",gap:"8px",alignItems:"center",justifyContent:"space-between",width:"100%",marginBottom:"8px",borderRadius:"8px",boxShadow:"0 0 5px 0px #0000001f"},children:[Object(U.jsx)(le.a,{variant:"circular",children:Object(U.jsx)(E.a,{})}),Object(U.jsx)(le.a,{variant:"text",style:{width:"100%"}})]})};var ce=function(){const e=Object(g.b)(),t=Object(g.c)((e=>e.chatStore.NoChats));return Object(U.jsx)(U.Fragment,{children:t?Object(U.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"50vh"},children:Object(U.jsxs)("div",{style:{backgroundColor:"white",height:"20vh",width:"60%",borderRadius:"4px",position:"relative"},className:"noChatFoundContainer",children:[Object(U.jsx)("div",{style:{position:"absolute",top:"8px",left:"8px"},children:Object(U.jsx)("p",{children:Object(U.jsx)(R.b,{})})}),Object(U.jsx)(W.a,{variant:"h6",style:{fontWeight:"600"},children:"No Chat Found"}),Object(U.jsx)("button",{className:"makeAChat",onClick:()=>e($(!0)),children:"Create a chat"})]})}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(oe,{}),Object(U.jsx)(oe,{}),Object(U.jsx)(oe,{}),Object(U.jsx)(oe,{})]})})};var re=function(e){let{data:t}=e;return Object(U.jsx)("div",{style:{display:"flex",flexDirection:"column",height:"80%",gap:"8px",overflow:"scroll"},className:"myChatContainer",children:t.length>0?t.map((e=>Object(U.jsx)(ae,{props:e},null===e||void 0===e?void 0:e._id))):Object(U.jsx)(ce,{})})},de=i(375),je=i(376);i(317);const ue=e=>{var t;let{props:i}=e;const n=Object(o.o)(),a=Object(g.b)();return Object(U.jsx)("button",{style:{width:"100%"},onClick:()=>{(async()=>{a($(!1)),a(ee(!0));const{data:e}=await x({userId:null===i||void 0===i?void 0:i._id}),t=await v();a(y(null===t||void 0===t?void 0:t.data)),a(ee(!1)),n("/chat/".concat(null===e||void 0===e?void 0:e._id))})()},children:Object(U.jsxs)("div",{style:{display:"flex",padding:"10px",alignItems:"center",gap:"8px",backgroundColor:"white",margin:"2px",borderRadius:"4px"},children:[Object(U.jsx)(E.a,{src:null===i||void 0===i?void 0:i.profilePic,alt:"img"}),Object(U.jsxs)("div",{children:[Object(U.jsx)(W.a,{variant:"body1",style:{color:"#3498db"},children:null===i||void 0===i?void 0:i.name}),Object(U.jsx)(W.a,{variant:"body2",style:{color:""},children:null===i||void 0===i||null===(t=i.latestMessage)||void 0===t?void 0:t.content})]})]})},"".concat(null===i||void 0===i?void 0:i._id))};var pe=function(e){let{data:t}=e;return Object(U.jsx)("div",{children:t.map((e=>Object(U.jsx)(ue,{props:e},null===e||void 0===e?void 0:e._id)))})},he=i(100),xe=i(195);var ve=function(){const e=Object(g.b)(),[t,i]=Object(n.useState)([]),[a,s]=Object(n.useState)(!1),l=Object(g.c)((e=>e.uiStore.open)),[o,c]=Object(n.useState)(""),r=Object(g.c)((e=>e.uiStore.loading));Object(n.useEffect)((()=>{(async()=>{try{const e=await p("users/allusers");i(null===e||void 0===e?void 0:e.data)}catch(e){console.error("Error fetching data:",e)}})()}),[]);const d=async e=>{let t=e||"";const n=await(e=>p("users/search?search=".concat(e)))(t);i(null===n||void 0===n?void 0:n.data),s(!1)},j=Object(xe.debounce)(d,1500);return Object(U.jsxs)(U.Fragment,{children:[r&&Object(U.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center"},children:[Object(U.jsx)(de.a,{}),Object(U.jsx)("p",{style:{color:"black",fontWeight:"600"},children:"Creating a chat for you..."})]}),Object(U.jsx)(je.a,{anchor:"left",open:l,onClose:()=>{e($(!1))},children:Object(U.jsxs)("div",{style:{height:"100vh",padding:"8px",overflow:"scroll"},className:"Drawer",children:[Object(U.jsxs)("div",{style:{display:"flex",gap:"20px",alignItems:"center",backgroundColor:"white",justifyContent:"space-between",padding:"8px"},children:[Object(U.jsx)(W.a,{variant:"h6",style:{color:"#3498db"},children:"Search Contact"}),Object(U.jsx)(he.a,{style:{fontSize:"30px",cursor:"pointer"},onClick:()=>e($(!1))})]}),Object(U.jsxs)("div",{style:{padding:"8px",display:"flex",gap:"8px",alignItems:"center"},children:[Object(U.jsx)(L.b,{style:{border:"2px solid gray",height:"40px",width:"34px",borderRadius:"6px 0px 0px 6px",color:"gray",cursor:"pointer"},onClick:d}),Object(U.jsx)("input",{onChange:e=>{c(e.target.value),s(!0),j(e.target.value)},type:"search",placeholder:"search...",style:{border:"1px solid gray",width:"100%",height:"40px",padding:"4px"}})]}),Object(U.jsx)("div",{children:a?Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(oe,{})}):Object(U.jsx)(pe,{data:t})})]})})]})};const be=a.a.forwardRef((function(e,t){return Object(U.jsx)(K.a,{direction:"up",ref:t,...e})}));var ge=function(e){var t,i,n;let{open:a,setOpen:s}=e;const l=Object(g.b)();var c=localStorage.getItem("loginInfo");c=JSON.parse(c);const r=Object(o.o)();return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(z.a,{open:a,TransitionComponent:be,keepMounted:!0,onClose:()=>s(!1),"aria-describedby":"alert-dialog-slide-description",children:Object(U.jsxs)("div",{style:{backgroundColor:"black",color:"white"},children:[Object(U.jsxs)(V.a,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Profile",Object(U.jsx)(he.b,{})]}),Object(U.jsxs)(q.a,{children:[Object(U.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"GrayText",marginBottom:"4px"},children:[Object(U.jsx)(E.a,{src:null===(t=c)||void 0===t?void 0:t.profilePic,alt:"user"}),Object(U.jsx)(W.a,{variant:"h6",children:null===(i=c)||void 0===i?void 0:i.name})]}),Object(U.jsxs)(H.a,{id:"alert-dialog-slide-description",style:{color:"GrayText"},children:["Email  : ",null===(n=c)||void 0===n?void 0:n.email]})]}),Object(U.jsx)("div",{style:{display:"flex",justifyContent:"center",gap:"8px",padding:"8px",alignItems:"center"},children:Object(U.jsxs)("button",{style:{display:"flex",alignItems:"center",gap:"8px"},onClick:()=>(l(y([])),l(T({})),l(w([])),localStorage.removeItem("loginInfo"),void r("/login")),children:[Object(U.jsx)(L.a,{style:{cursor:"pointer"}}),Object(U.jsx)(W.a,{variant:"h6",style:{cursor:"pointer"},children:"Logout"})]})})]})})})};var Oe=function(e){let{chatData:t}=e;const[i,a]=Object(n.useState)(!1);return Object(U.jsxs)("div",{style:{padding:"8px"},className:"AllChat",children:[Object(U.jsx)(ge,{open:i,setOpen:a}),Object(U.jsx)("hr",{style:{color:"white"}}),Object(U.jsx)(ne,{handleOpen:()=>a(!0)}),Object(U.jsx)(re,{data:t}),Object(U.jsx)(ve,{})]})},fe=i(196);let me;var ye=()=>{var e,t;const{id:i}=Object(o.q)(),a=Object(g.b)(),s=Object(g.c)((e=>e.chatStore.allChats)),l=Object(g.c)((e=>e.chatStore.allMessages)),[d,u]=Object(n.useState)("");console.log(l);const[p,O]=Object(n.useState)([]),[f,m]=Object(n.useState)(!1),[k,N]=Object(n.useState)([]),[_,M]=Object(n.useState)(!1),[D,E]=Object(n.useState)(!1),[W,F]=Object(n.useState)("send a message..."),[L,P]=Object(n.useState)(""),A=JSON.parse(localStorage.getItem("loginInfo")),J=null===s||void 0===s||null===(e=s.find((e=>(null===e||void 0===e?void 0:e._id)===i)))||void 0===e||null===(t=e.users)||void 0===t?void 0:t.find((e=>(null===e||void 0===e?void 0:e._id)!==(null===A||void 0===A?void 0:A.id)));Object(n.useEffect)((()=>{"login"!==i&&a(T(J))}),[J,i,a]),Object(n.useEffect)((()=>{const e=null===l||void 0===l?void 0:l.find((e=>(null===e||void 0===e?void 0:e._id)===i));N(null===e||void 0===e?void 0:e.messages)}),[l,i,a]);const G=JSON.parse(localStorage.getItem("loginInfo"));Object(n.useEffect)((()=>{G.id&&(me=Object(r.a)("http://localhost:4000"),me.emit("setup",G.id),me.on("connected",(()=>{m(!0)})));(async()=>{if("login"!==i)try{const{data:e}=await x({userId:null===J||void 0===J?void 0:J._id});me.emit("join chat",null===e||void 0===e?void 0:e._id);const t=await v();a(S(!1)),a(y(null===t||void 0===t?void 0:t.data))}catch(n){var e,t;if(0===p.length)return j.a.success("wait for a while...");j.a.error(null===n||void 0===n||null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.msg)}})()}),[i,null===J||void 0===J?void 0:J._id,a]);const R=async e=>{try{var t;me.emit("stop typing",i),F("sending..."),P(""),a(C({_id:i,message:{sender:{_id:null===G||void 0===G?void 0:G.id},content:null===e||void 0===e?void 0:e.encryptedText,iv:null===e||void 0===e?void 0:e.iv}})),a(I({_id:i,message:{sender:{_id:null===G||void 0===G?void 0:G.id},content:null===e||void 0===e?void 0:e.encryptedText,iv:null===e||void 0===e?void 0:e.iv}}));const s=await(n={message:null===e||void 0===e?void 0:e.encryptedText,chatId:i,iv:null===e||void 0===e?void 0:e.iv},h("messages",n));me.emit("new message",null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.newMessage),F("send a message...")}catch(s){j.a.error("error while sending message")}var n};Object(n.useEffect)((()=>{me.on("message received",(async e=>{console.log(e,"new message received"),a(C({_id:e.chat,message:{sender:{_id:null===e||void 0===e?void 0:e.sender},content:null===e||void 0===e?void 0:e.content,iv:null===e||void 0===e?void 0:e.iv}})),a(I({_id:e.chat,message:{sender:{_id:null===e||void 0===e?void 0:e.sender},content:null===e||void 0===e?void 0:e.content,iv:null===e||void 0===e?void 0:e.iv}}))}))}),[a,i]),Object(n.useEffect)((()=>{var e,t;!1!==f&&(null===(e=me)||void 0===e||e.on("typing",(e=>{u(e),M(!0)})),null===(t=me)||void 0===t||t.on("stopTy",(()=>{M(!1)})))}));return Object(n.useEffect)((()=>{if(s.length>0)return;(async()=>{const{data:e}=await v();O(e),a(y(e)),e.forEach((e=>{const{_id:t}=e;Promise.resolve(b(t)).then((e=>{var i;a(w({messages:null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.messages,_id:t}))}))}))})()}),[a,s.length]),Object(U.jsx)("div",{children:Object(U.jsxs)("div",{className:"chatMain",children:[Object(U.jsx)(c.a,{mdDown:!0,children:Object(U.jsx)(Oe,{chatData:s})}),Object(U.jsx)(X,{allMessages:k,message:L,sendMessage:()=>{if(0===L.length)return;let e=Object(fe.a)(L);R({encryptedText:null===e||void 0===e?void 0:e.encryptedText,iv:null===e||void 0===e?void 0:e.iv})},setMessage:P,label:W,isTyping:()=>{if(!1===f)return;D||(E(!0),me.emit("typing",i));const e=(new Date).getTime();setTimeout((()=>{(new Date).getTime()-e>=3e3&&(me.emit("stopTy",i),E(!1))}),3e3)},userIsTyping:_,receiveUserTyping:d})]})})};var we=function(){return Object(U.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(U.jsx)("img",{src:ie,alt:"img"})})};var Ce=function(){const[e,t]=Object(n.useState)([]),i=Object(g.b)(),a=Object(g.c)((e=>e.chatStore.allChats));return Object(n.useEffect)((()=>{if(a.length>0)return;(async()=>{const{data:e}=await v();0===e.length?i(S(!0)):i(S(!1)),t(e),i(y(e)),e.forEach((e=>{const{_id:t}=e;Promise.resolve(b(t)).then((e=>{var n;i(w({messages:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.messages,_id:t}))}))}))})()}),[i,a.length]),Object(n.useEffect)((()=>{t(a)}),[a]),Object(U.jsx)("div",{children:Object(U.jsxs)("div",{className:"chatMain",children:[Object(U.jsx)(Oe,{chatData:e}),Object(U.jsxs)(c.a,{mdDown:!0,children:[" ",Object(U.jsx)(we,{})]})]})})},Se=i(367),Ie=i.p+"static/media/search.41f9372e.gif";var ke=function(){const e=Object(o.o)(),t=Object(g.b)(),[i,a]=Object(n.useState)({email:"",password:""});return Object(U.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",width:"100%",flexDirection:"column",gap:"32px"},children:Object(U.jsxs)(Se.a,{elevation:2,style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"60vh",width:"100%",maxWidth:"500px"},children:[Object(U.jsx)("img",{src:Ie,alt:"",style:{height:"80px"}}),Object(U.jsx)(W.a,{variant:"h4",style:{padding:"16px"},children:"Login"}),Object(U.jsxs)("form",{onSubmit:async n=>{n.preventDefault();try{var a,s,l;const n=await(r=i,h("users/login",r));j.a.success(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.msg,{position:"top-center",duration:4e3});var o=JSON.stringify(null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.user);localStorage.setItem("loginInfo",o),t(M(null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.user)),t(_(!0)),e("/")}catch(d){var c;j.a.error(null===d||void 0===d||null===(c=d.response)||void 0===c?void 0:c.data.msg,{position:"top-center",duration:4e3})}var r},style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",gap:"8px"},children:[Object(U.jsx)("input",{onChange:e=>{a((t=>({...t,email:e.target.value})))},value:i.email,type:"email",placeholder:"Email",required:!0,style:{height:"40px",maxWidth:"40vh",width:"90%",padding:"4px",border:"1px solid gray"}}),Object(U.jsx)("input",{onChange:e=>{a((t=>({...t,password:e.target.value})))},value:i.password,type:"password",placeholder:"Password",required:!0,style:{height:"40px",maxWidth:"40vh",width:"90%",padding:"4px",border:"1px solid gray"}}),Object(U.jsx)("button",{type:"submit",style:{height:"40px",backgroundColor:"#2fda24",width:"80%",maxWidth:"30vh",color:"white"},children:"Login"})]}),Object(U.jsx)("button",{style:{padding:"8px"},onClick:()=>e("/create-account"),children:"Don't have an account?"})]})})};var Ne=function(){const e=Object(o.o)(),[t,i]=Object(n.useState)({name:"",email:"",password:""});return Object(U.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",width:"100%",flexDirection:"column",gap:"32px"},children:Object(U.jsxs)(Se.a,{elevation:2,style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"60vh",width:"100%",maxWidth:"500px"},children:[Object(U.jsx)("img",{src:Ie,alt:"",style:{height:"80px"}}),Object(U.jsx)(W.a,{variant:"h4",style:{padding:"16px"},children:"Create Account"}),Object(U.jsxs)("form",{onSubmit:async i=>{i.preventDefault();try{var n;const i=await(a=t,h("users/register",a));j.a.success(null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.msg,{position:"top-center",duration:4e3}),e("/login")}catch(s){j.a.error(s.response.data.msg,{position:"top-center",duration:4e3})}var a},style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",gap:"8px"},children:[Object(U.jsx)("input",{onChange:e=>{i((t=>({...t,name:e.target.value})))},value:t.name,type:"text",placeholder:"Name",required:!0,style:{height:"40px",maxWidth:"40vh",width:"90%",padding:"4px",border:"1px solid gray"}}),Object(U.jsx)("input",{onChange:e=>{i((t=>({...t,email:e.target.value})))},value:t.email,type:"email",placeholder:"Email",required:!0,style:{height:"40px",maxWidth:"40vh",width:"90%",padding:"4px",border:"1px solid gray"}}),Object(U.jsx)("input",{onChange:e=>{i((t=>({...t,password:e.target.value})))},value:t.password,type:"password",placeholder:"Password",required:!0,style:{height:"40px",maxWidth:"40vh",width:"90%",padding:"4px",border:"1px solid gray"}}),Object(U.jsx)("button",{type:"submit",style:{height:"40px",backgroundColor:"#2fda24",width:"80%",maxWidth:"30vh",color:"white"},children:"Let's Go"})]}),Object(U.jsx)("button",{style:{padding:"8px"},onClick:()=>e("/login"),children:"Already have an account?"})]})})},_e=i.p+"static/media/notFound.26199377.png";var Me=function(){const e=Object(o.o)();return Object(U.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",width:"100%",flexDirection:"column"},children:[Object(U.jsx)("img",{src:_e,alt:"404",style:{height:"200px",width:"400px",maxWidth:"90%"}}),Object(U.jsx)("button",{onClick:()=>e("/"),style:{backgroundColor:"white",border:"none",padding:"8px",borderRadius:"4px",cursor:"pointer",color:"black",fontSize:"16px",fontWeight:"bold",marginLeft:"8px"},children:"Home"})]})};var Te=function(){const e=Object(o.o)(),t=Object(g.b)();var i=localStorage.getItem("loginInfo");return Object(n.useEffect)((()=>{i||"/create-account"!==window.location.pathname?i||e("/login"):e("/create-account")}),[i,e,t]),Object(U.jsx)("div",{children:Object(U.jsx)(o.c,{children:i?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(o.a,{path:"/",element:Object(U.jsx)(Ce,{})}),Object(U.jsx)(o.a,{path:"/chat/:id",element:Object(U.jsx)(ye,{})}),Object(U.jsx)(o.a,{path:"/*",element:Object(U.jsx)(Me,{})})]}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(o.a,{path:"/login",element:Object(U.jsx)(ke,{})}),Object(U.jsx)(o.a,{path:"/create-account",element:Object(U.jsx)(Ne,{})})]})})})};var De=function(){return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(Te,{})})},Ee=(i(318),i(42));var We=function(){const{toasts:e}=Object(d.useToasterStore)();return Object(n.useEffect)((()=>{e.filter((e=>e.visible)).filter(((e,t)=>t>=4)).forEach((e=>d.toast.dismiss(e.id)))}),[e]),Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(d.Toaster,{position:"bottom-left",reverseOrder:!1,gutter:8,containerClassName:"",containerStyle:{},toastOptions:{className:"",duration:3e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,theme:{primary:"green",secondary:"black"}}}})})};var Fe=Object(O.a)({reducer:{chatStore:k,uiStore:te,userStore:D}});l.a.render(Object(U.jsxs)(Ee.a,{children:[Object(U.jsx)(g.a,{store:Fe,children:Object(U.jsx)(De,{})}),Object(U.jsx)(We,{})]}),document.getElementById("root"))},96:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return l}));var n=i(62),a=i.n(n),s=i(2);const l=(t,i)=>{const n=a.a.createHash("sha256").update("123rudhram8802").digest("base64").substr(0,32),l=a.a.createDecipheriv("aes-256-cbc",e.from(n),e.from(i,"hex"));let o=l.update(t,"hex","utf-8");return o+=l.final("utf-8"),Object(s.jsx)(s.Fragment,{children:o})}}).call(this,i(23).Buffer)}},[[319,1,2]]]);
//# sourceMappingURL=main.41519f75.chunk.js.map